{"remainingRequest":"D:\\222管理信息系统\\mis_project_02\\node_modules\\_vue-loader@15.9.7@vue-loader\\lib\\index.js??vue-loader-options!D:\\222管理信息系统\\mis_project_02\\src\\views\\Login.vue?vue&type=style&index=0&id=d3a9719e&scoped=true&lang=css&","dependencies":[{"path":"D:\\222管理信息系统\\mis_project_02\\src\\views\\Login.vue","mtime":1624269415433},{"path":"D:\\222管理信息系统\\mis_project_02\\node_modules\\_css-loader@3.6.0@css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\222管理信息系统\\mis_project_02\\node_modules\\_vue-loader@15.9.7@vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\222管理信息系统\\mis_project_02\\node_modules\\_postcss-loader@3.0.0@postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\222管理信息系统\\mis_project_02\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\222管理信息系统\\mis_project_02\\node_modules\\_vue-loader@15.9.7@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoubG9naW5fY29udGFpbmVyIHsKICAvKiBiYWNrZ3JvdW5kLWNvbG9yOiAjMmI0YjZiOyAqLwogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LDIxNiw4LDAuNyk7CiAgaGVpZ2h0OiAxMDAlOwp9Ci5sb2dpbl9ib3ggewogIC8qIHdpZHRoOiA0NTBweDsKICBoZWlnaHQ6IDMwMHB4OyAqLwogIHdpZHRoOiA0NTBweDsKICBoZWlnaHQ6IDMzMHB4OwogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7CiAgYm9yZGVyLXJhZGl1czogM3B4OwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBsZWZ0OiA1MCU7CiAgdG9wOiA1MCU7CiAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7Cn0KCi5hdmFfYm94IHsKICBoZWlnaHQ6IDEzMHB4OwogIHdpZHRoOiAxMzBweDsKICBib3JkZXI6IDFweCBzb2xpZCAjZWVlOwogIGJvcmRlci1yYWRpdXM6IDUwJTsKICBwYWRkaW5nOiAxMHB4OwogIGJveC1zaGFkb3c6IDAgMCAxMHB4ICNkZGQ7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGxlZnQ6IDUwJTsKICAvKiB0cmFuc2Zvcm0g55So5p2l5L2N56e777yM56e75Yqo54i255uS5a2Q5LiA6Iis55qE5a695bqmIC0g6Ieq5bex5LiA5Y2K55qE5a695bqmICovCiAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwtNTAlKTsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOwp9CmltZyB7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIGJvcmRlci1yYWRpdXM6IDUwJTsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlOwp9Ci5sb2dpbl9mb3JtIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgYm90dG9tOiAwOwogIHdpZHRoOiAxMDAlOwogIHBhZGRpbmc6IDAgMjBweDsKICBib3gtc2l6aW5nOiBib3JkZXItYm94Owp9Ci5mb3JtX2J0bnMgewogIC8qIOaMiemSrumdoOWPs+Wvuem9kCAqLwogIGRpc3BsYXk6IGZsZXg7CiAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDsKfQouZm9ybV9idG5zXzIgewogIC8qIOaMiemSrumdoOWPs+Wvuem9kCAqLwogIGRpc3BsYXk6IGZsZXg7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7Cn0K"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"login_container\">\n    <div class=\"login_box\">\n      <!-- 头像 -->\n      <div class=\"ava_box\">\n        <!-- <img src=\"../assets/logo.png\" alt=\"\"> -->\n        <img src=\"../assets/images/logo.png\" alt=\"\">\n      </div>\n      <!-- 登录表单 -->\n      <!-- 为表单绑定规则。:rules=\"formRules不行\"。规则用prop绑定 -->\n      <!-- ref添加引用，便于拿到表单的实例对象 -->\n      \n      <el-form ref=\"formRef\" label-width=\"0px\" class=\"login_form\" :model=\"form\" :rules=\"rules\">\n        <el-form-item prop=\"username\">\n          <el-input placeholder=\"用户名\" v-model=\"form.username\">\n            <i slot=\"prefix\" class=\"el-input__icon el-icon-user\"></i>\n          </el-input>\n        </el-form-item>\n        <el-form-item prop=\"pwd\">\n          <el-input placeholder=\"密码\" type=\"password\" v-model=\"form.pwd\" :show-password=\"true\">\n            <i slot=\"prefix\" class=\"el-input__icon el-icon-lock\"></i>\n          </el-input>\n        </el-form-item>\n          \n          <span class=\"form_btns\">\n            <router-link to=\"active\" style=\"font-size: 14px;\">\n              / 管理员注册\n            </router-link>\n            <router-link to=\"forgetPassword\" style=\"margin-left: 5px; font-size: 14px;\">\n            / 忘记密码\n            </router-link>\n          </span>\n\n        <!-- 按钮 -->\n        <el-form-item class=\"form_btns_2\">\n          <el-button type=\"primary\" @click=\"btnLogin\">登录</el-button>\n          <el-button type=\"info\" @click=\"btnReset\">清除</el-button>\n          <!-- <span>\n              <router-link to=\"loginadmin\" style=\"padding-left: 35px;\">\n            我是管理员 >>\n            </router-link>\n          </span> -->\n            \n        </el-form-item>\n      </el-form>\n    </div>\n  </div>\n  \n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      form: {\n        username: \"\",\n        pwd: \"\"\n      },\n      rules: {\n        // rules 属性必须严格对应form属性，名字不能不一样（？）\n        username: [\n          { required: true, message: '请输入用户名', trigger: 'blur' },\n        ],\n        pwd: [\n          { required: true, message: '请输入密码', trigger: 'blur' },\n        ]\n      }\n    }\n  },\n  methods: {\n    btnLogin () {\n      // validate函数接受一个回调函数，回调函数有2个形参\n      this.$refs.formRef.validate(async (valid) => {\n        // console.log(valid); // valid 是 boolean，告知表单预验证是通过了还是失败了\n        if(!valid) return;\n        let userForm = {\n          key: this.form.username,\n          password: this.form.pwd\n        };\n        // console.log(userForm);\n\n        // 不行\n        // let result = this.$http.post(\n        //   \"xUser/doLogin\", userForm\n        // ); \n\n        // 行\n        // let result = this.$http.post(\n        //   \"xUser/doLogin?\" + \"key=\" + userForm.key + \"&password=\" + userForm.password\n        // ); \n\n        // await 用来简化返回值为 promise 的方法；注意 await 只能用在被 async 修饰的方法中，因此必须把紧挨着它的方法修饰成异步的 async 方法\n        let {data:res} = await this.$http.post(\n          \"xUser/doLogin?\" + \"key=\" + userForm.key + \"&password=\" + userForm.password\n        );\n        console.log(\"loginTest\",res);\n      if(res.code == 200) {\n        window.sessionStorage.setItem(\"token\", res.data.tokenInfo.tokenValue);\n        window.sessionStorage.setItem(\"roleId\", res.data.xUser.roleId);\n        window.sessionStorage.setItem(\"userId\", res.data.xUser.id);\n        window.sessionStorage.setItem(\"name\", res.data.xUser.name);\n        this.$router.push(\"/home\");\n        return this.$message({\n          message: '登录成功',\n          type: 'success'\n        });\n      }\n\n      this.$message.error('登录失败！');\n\n      });\n    },\n    btnLogin2 () {\n      // validate函数接受一个回调函数，回调函数有2个形参\n      this.$refs.formRef.validate(async (valid) => {\n        // console.log(valid); // valid 是 boolean，告知表单预验证是通过了还是失败了\n        if(!valid) return;\n        let userForm = {\n          key: this.form.username,\n          password: this.form.pwd\n        };\n        console.log(userForm);\n        let {result} = this.$post(\n          \"http://192.168.43.94:8290/xUser/doLogin\", userForm\n        ); \n        // let {data:result} = await this.$post(\n        //   \"http://192.168.43.94:8290/xUser/doLogin\", userForm\n        // ); \n        // await 用来简化返回值为 promise 的方法；注意 await 只能用在被 async 修饰的方法中，因此必须把紧挨着它的方法修饰成异步的 async 方法\n        console.log(result);\n        this.$message({\n          message: '登录成功',\n          type: 'success'\n        });\n        // window.sessionStorage.setItem(\"token\", res.data.token);\n        this.$router.push(\"/home\");\n      });\n    },\n    btnReset () {\n      // 调用 element-ui form 实例自带的方法\n      this.$refs.formRef.resetFields();\n    },\n\n  }\n\n}\n</script>\n\n<style scoped>\n  .login_container {\n    /* background-color: #2b4b6b; */\n    background-color: rgba(255,216,8,0.7);\n    height: 100%;\n  }\n  .login_box {\n    /* width: 450px;\n    height: 300px; */\n    width: 450px;\n    height: 330px;\n    background-color: #fff;\n    border-radius: 3px;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n  }\n\n  .ava_box {\n    height: 130px;\n    width: 130px;\n    border: 1px solid #eee;\n    border-radius: 50%;\n    padding: 10px;\n    box-shadow: 0 0 10px #ddd;\n    position: absolute;\n    left: 50%;\n    /* transform 用来位移，移动父盒子一般的宽度 - 自己一半的宽度 */\n    transform: translate(-50%,-50%);\n    background-color: #fff;\n  }\n  img {\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: #eee;\n  }\n  .login_form {\n    position: absolute;\n    bottom: 0;\n    width: 100%;\n    padding: 0 20px;\n    box-sizing: border-box;\n  }\n  .form_btns {\n    /* 按钮靠右对齐 */\n    display: flex;\n    justify-content: flex-end;\n  }\n  .form_btns_2 {\n    /* 按钮靠右对齐 */\n    display: flex;\n    justify-content: center;\n  }\n</style>"]}]}