{"remainingRequest":"D:\\222管理信息系统\\mis_project_02\\node_modules\\_vue-loader@15.9.7@vue-loader\\lib\\index.js??vue-loader-options!D:\\222管理信息系统\\mis_project_02\\src\\views\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\222管理信息系统\\mis_project_02\\src\\views\\Login.vue","mtime":1624362942507},{"path":"D:\\222管理信息系统\\mis_project_02\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\222管理信息系统\\mis_project_02\\node_modules\\_babel-loader@8.2.2@babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\222管理信息系统\\mis_project_02\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\222管理信息系统\\mis_project_02\\node_modules\\_vue-loader@15.9.7@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZm9ybTogewogICAgICAgIHVzZXJuYW1lOiAiIiwKICAgICAgICBwd2Q6ICIiCiAgICAgIH0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgLy8gcnVsZXMg5bGe5oCn5b+F6aG75Lil5qC85a+55bqUZm9ybeWxnuaAp++8jOWQjeWtl+S4jeiDveS4jeS4gOagt++8iO+8n++8iQogICAgICAgIHVzZXJuYW1lOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl55So5oi35ZCNJywgdHJpZ2dlcjogJ2JsdXInIH0sCiAgICAgICAgXSwKICAgICAgICBwd2Q6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXlr4bnoIEnLCB0cmlnZ2VyOiAnYmx1cicgfSwKICAgICAgICBdCiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGJ0bkxvZ2luICgpIHsKICAgICAgLy8gdmFsaWRhdGXlh73mlbDmjqXlj5fkuIDkuKrlm57osIPlh73mlbDvvIzlm57osIPlh73mlbDmnIky5Liq5b2i5Y+CCiAgICAgIHRoaXMuJHJlZnMuZm9ybVJlZi52YWxpZGF0ZShhc3luYyAodmFsaWQpID0+IHsKICAgICAgICAvLyBjb25zb2xlLmxvZyh2YWxpZCk7IC8vIHZhbGlkIOaYryBib29sZWFu77yM5ZGK55+l6KGo5Y2V6aKE6aqM6K+B5piv6YCa6L+H5LqG6L+Y5piv5aSx6LSl5LqGCiAgICAgICAgaWYoIXZhbGlkKSByZXR1cm47CiAgICAgICAgbGV0IHVzZXJGb3JtID0gewogICAgICAgICAga2V5OiB0aGlzLmZvcm0udXNlcm5hbWUsCiAgICAgICAgICBwYXNzd29yZDogdGhpcy5mb3JtLnB3ZAogICAgICAgIH07CiAgICAgICAgLy8gY29uc29sZS5sb2codXNlckZvcm0pOwoKICAgICAgICAvLyDkuI3ooYwKICAgICAgICAvLyBsZXQgcmVzdWx0ID0gdGhpcy4kaHR0cC5wb3N0KAogICAgICAgIC8vICAgInhVc2VyL2RvTG9naW4iLCB1c2VyRm9ybQogICAgICAgIC8vICk7IAoKICAgICAgICAvLyDooYwKICAgICAgICAvLyBsZXQgcmVzdWx0ID0gdGhpcy4kaHR0cC5wb3N0KAogICAgICAgIC8vICAgInhVc2VyL2RvTG9naW4/IiArICJrZXk9IiArIHVzZXJGb3JtLmtleSArICImcGFzc3dvcmQ9IiArIHVzZXJGb3JtLnBhc3N3b3JkCiAgICAgICAgLy8gKTsgCgogICAgICAgIC8vIGF3YWl0IOeUqOadpeeugOWMlui/lOWbnuWAvOS4uiBwcm9taXNlIOeahOaWueazle+8m+azqOaEjyBhd2FpdCDlj6rog73nlKjlnKjooqsgYXN5bmMg5L+u6aWw55qE5pa55rOV5Lit77yM5Zug5q2k5b+F6aG75oqK57Sn5oyo552A5a6D55qE5pa55rOV5L+u6aWw5oiQ5byC5q2l55qEIGFzeW5jIOaWueazlQogICAgICAgIGxldCB7ZGF0YTpyZXN9ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KAogICAgICAgICAgInhVc2VyL2RvTG9naW4/IiArICJrZXk9IiArIHVzZXJGb3JtLmtleSArICImcGFzc3dvcmQ9IiArIHVzZXJGb3JtLnBhc3N3b3JkCiAgICAgICAgKTsKICAgICAgICBjb25zb2xlLmxvZygibG9naW5UZXN0IixyZXMpOwogICAgICBpZihyZXMuY29kZSA9PSAyMDApIHsKICAgICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgidG9rZW4iLCByZXMuZGF0YS50b2tlbkluZm8udG9rZW5WYWx1ZSk7CiAgICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oInJvbGVJZCIsIHJlcy5kYXRhLnhVc2VyLnJvbGVJZCk7CiAgICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oInVzZXJJZCIsIHJlcy5kYXRhLnhVc2VyLmlkKTsKICAgICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgibmFtZSIsIHJlcy5kYXRhLnhVc2VyLm5hbWUpOwogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvaG9tZSIpOwogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIG1lc3NhZ2U6ICfnmbvlvZXmiJDlip8nLAogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+eZu+W9leWksei0pe+8gScpOwoKICAgICAgfSk7CiAgICB9LAogICAgYnRuTG9naW4yICgpIHsKICAgICAgLy8gdmFsaWRhdGXlh73mlbDmjqXlj5fkuIDkuKrlm57osIPlh73mlbDvvIzlm57osIPlh73mlbDmnIky5Liq5b2i5Y+CCiAgICAgIHRoaXMuJHJlZnMuZm9ybVJlZi52YWxpZGF0ZShhc3luYyAodmFsaWQpID0+IHsKICAgICAgICAvLyBjb25zb2xlLmxvZyh2YWxpZCk7IC8vIHZhbGlkIOaYryBib29sZWFu77yM5ZGK55+l6KGo5Y2V6aKE6aqM6K+B5piv6YCa6L+H5LqG6L+Y5piv5aSx6LSl5LqGCiAgICAgICAgaWYoIXZhbGlkKSByZXR1cm47CiAgICAgICAgbGV0IHVzZXJGb3JtID0gewogICAgICAgICAga2V5OiB0aGlzLmZvcm0udXNlcm5hbWUsCiAgICAgICAgICBwYXNzd29yZDogdGhpcy5mb3JtLnB3ZAogICAgICAgIH07CiAgICAgICAgY29uc29sZS5sb2codXNlckZvcm0pOwogICAgICAgIGxldCB7cmVzdWx0fSA9IHRoaXMuJHBvc3QoCiAgICAgICAgICAiaHR0cDovLzE5Mi4xNjguNDMuOTQ6ODI5MC94VXNlci9kb0xvZ2luIiwgdXNlckZvcm0KICAgICAgICApOyAKICAgICAgICAvLyBsZXQge2RhdGE6cmVzdWx0fSA9IGF3YWl0IHRoaXMuJHBvc3QoCiAgICAgICAgLy8gICAiaHR0cDovLzE5Mi4xNjguNDMuOTQ6ODI5MC94VXNlci9kb0xvZ2luIiwgdXNlckZvcm0KICAgICAgICAvLyApOyAKICAgICAgICAvLyBhd2FpdCDnlKjmnaXnroDljJbov5Tlm57lgLzkuLogcHJvbWlzZSDnmoTmlrnms5XvvJvms6jmhI8gYXdhaXQg5Y+q6IO955So5Zyo6KKrIGFzeW5jIOS/rumlsOeahOaWueazleS4re+8jOWboOatpOW/hemhu+aKiue0p+aMqOedgOWug+eahOaWueazleS/rumlsOaIkOW8guatpeeahCBhc3luYyDmlrnms5UKICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpOwogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogJ+eZu+W9leaIkOWKnycsCiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICB9KTsKICAgICAgICAvLyB3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgidG9rZW4iLCByZXMuZGF0YS50b2tlbik7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9ob21lIik7CiAgICAgIH0pOwogICAgfSwKICAgIGJ0blJlc2V0ICgpIHsKICAgICAgLy8g6LCD55SoIGVsZW1lbnQtdWkgZm9ybSDlrp7kvovoh6rluKbnmoTmlrnms5UKICAgICAgdGhpcy4kcmVmcy5mb3JtUmVmLnJlc2V0RmllbGRzKCk7CiAgICB9LAoKICB9Cgp9Cg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"login_container\">\n    <div class=\"login_box\">\n      <!-- 头像 -->\n      <div class=\"ava_box\">\n        <!-- <img src=\"../assets/logo.png\" alt=\"\"> -->\n        <img src=\"../assets/images/logo2.png\" alt=\"\">\n      </div>\n      <!-- 登录表单 -->\n      <!-- 为表单绑定规则。:rules=\"formRules不行\"。规则用prop绑定 -->\n      <!-- ref添加引用，便于拿到表单的实例对象 -->\n      \n      <el-form ref=\"formRef\" label-width=\"0px\" class=\"login_form\" :model=\"form\" :rules=\"rules\">\n        <el-form-item prop=\"username\">\n          <el-input placeholder=\"用户名\" v-model=\"form.username\">\n            <i slot=\"prefix\" class=\"el-input__icon el-icon-user\"></i>\n          </el-input>\n        </el-form-item>\n        <el-form-item prop=\"pwd\">\n          <el-input placeholder=\"密码\" type=\"password\" v-model=\"form.pwd\" :show-password=\"true\">\n            <i slot=\"prefix\" class=\"el-input__icon el-icon-lock\"></i>\n          </el-input>\n        </el-form-item>\n          \n          <span class=\"form_btns\">\n            <router-link to=\"register\" style=\"font-size: 14px;\">\n              / 管理员注册\n            </router-link>\n            <router-link to=\"forgetPassword\" style=\"margin-left: 5px; font-size: 14px;\">\n            / 忘记密码\n            </router-link>\n          </span>\n\n        <!-- 按钮 -->\n        <el-form-item class=\"form_btns_2\">\n          <el-button type=\"primary\" @click=\"btnLogin\">登录</el-button>\n          <el-button type=\"info\" @click=\"btnReset\">清除</el-button>\n          <!-- <span>\n              <router-link to=\"loginadmin\" style=\"padding-left: 35px;\">\n            我是管理员 >>\n            </router-link>\n          </span> -->\n            \n        </el-form-item>\n      </el-form>\n    </div>\n  </div>\n  \n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      form: {\n        username: \"\",\n        pwd: \"\"\n      },\n      rules: {\n        // rules 属性必须严格对应form属性，名字不能不一样（？）\n        username: [\n          { required: true, message: '请输入用户名', trigger: 'blur' },\n        ],\n        pwd: [\n          { required: true, message: '请输入密码', trigger: 'blur' },\n        ]\n      }\n    }\n  },\n  methods: {\n    btnLogin () {\n      // validate函数接受一个回调函数，回调函数有2个形参\n      this.$refs.formRef.validate(async (valid) => {\n        // console.log(valid); // valid 是 boolean，告知表单预验证是通过了还是失败了\n        if(!valid) return;\n        let userForm = {\n          key: this.form.username,\n          password: this.form.pwd\n        };\n        // console.log(userForm);\n\n        // 不行\n        // let result = this.$http.post(\n        //   \"xUser/doLogin\", userForm\n        // ); \n\n        // 行\n        // let result = this.$http.post(\n        //   \"xUser/doLogin?\" + \"key=\" + userForm.key + \"&password=\" + userForm.password\n        // ); \n\n        // await 用来简化返回值为 promise 的方法；注意 await 只能用在被 async 修饰的方法中，因此必须把紧挨着它的方法修饰成异步的 async 方法\n        let {data:res} = await this.$http.post(\n          \"xUser/doLogin?\" + \"key=\" + userForm.key + \"&password=\" + userForm.password\n        );\n        console.log(\"loginTest\",res);\n      if(res.code == 200) {\n        window.sessionStorage.setItem(\"token\", res.data.tokenInfo.tokenValue);\n        window.sessionStorage.setItem(\"roleId\", res.data.xUser.roleId);\n        window.sessionStorage.setItem(\"userId\", res.data.xUser.id);\n        window.sessionStorage.setItem(\"name\", res.data.xUser.name);\n        this.$router.push(\"/home\");\n        return this.$message({\n          message: '登录成功',\n          type: 'success'\n        });\n      }\n\n      this.$message.error('登录失败！');\n\n      });\n    },\n    btnLogin2 () {\n      // validate函数接受一个回调函数，回调函数有2个形参\n      this.$refs.formRef.validate(async (valid) => {\n        // console.log(valid); // valid 是 boolean，告知表单预验证是通过了还是失败了\n        if(!valid) return;\n        let userForm = {\n          key: this.form.username,\n          password: this.form.pwd\n        };\n        console.log(userForm);\n        let {result} = this.$post(\n          \"http://192.168.43.94:8290/xUser/doLogin\", userForm\n        ); \n        // let {data:result} = await this.$post(\n        //   \"http://192.168.43.94:8290/xUser/doLogin\", userForm\n        // ); \n        // await 用来简化返回值为 promise 的方法；注意 await 只能用在被 async 修饰的方法中，因此必须把紧挨着它的方法修饰成异步的 async 方法\n        console.log(result);\n        this.$message({\n          message: '登录成功',\n          type: 'success'\n        });\n        // window.sessionStorage.setItem(\"token\", res.data.token);\n        this.$router.push(\"/home\");\n      });\n    },\n    btnReset () {\n      // 调用 element-ui form 实例自带的方法\n      this.$refs.formRef.resetFields();\n    },\n\n  }\n\n}\n</script>\n\n<style scoped>\n  .login_container {\n    /* background-color: #2b4b6b; */\n    background-color: rgba(255,216,8,0.7);\n    height: 100%;\n  }\n  .login_box {\n    /* width: 450px;\n    height: 300px; */\n    width: 450px;\n    height: 330px;\n    background-color: #fff;\n    border-radius: 3px;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n  }\n\n  .ava_box {\n    height: 130px;\n    width: 130px;\n    border: 1px solid #eee;\n    border-radius: 50%;\n    padding: 10px;\n    box-shadow: 0 0 10px #ddd;\n    position: absolute;\n    left: 50%;\n    /* transform 用来位移，移动父盒子一般的宽度 - 自己一半的宽度 */\n    transform: translate(-50%,-50%);\n    background-color: #fff;\n  }\n  img {\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: #eee;\n  }\n  .login_form {\n    position: absolute;\n    bottom: 0;\n    width: 100%;\n    padding: 0 20px;\n    box-sizing: border-box;\n  }\n  .form_btns {\n    /* 按钮靠右对齐 */\n    display: flex;\n    justify-content: flex-end;\n  }\n  .form_btns_2 {\n    /* 按钮靠右对齐 */\n    display: flex;\n    justify-content: center;\n  }\n</style>"]}]}